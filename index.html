<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="robots" CONTENT="noindex, nofollow">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<title>Prestashop Demo</title>
		<link rel="stylesheet" href="css/screen.css">
	</head>
	<body>
		<div id="header">
			<div id="logo" class="block_header">
				<img src="img/logo_prestashop.png" />
			</div>
			<ul id="devices">
				<li>
					<a href="#" class='change-device active' data-target='desktop' >
						<img src='img/desktop.png' alt='Desktop' />
					</a>
				</li>
				<li>
					<a href="#" class='change-device' data-target='tablet-h'>
						<img src='img/tablet-h.png' alt='Tablet' />
					</a>
				</li>
				<li>
					<a href="#" class='change-device' data-target='tablet-v'>
						<img src='img/tablet-v.png' alt='Tablet' />
					</a>
				</li>
				<li>
					<a href="#" class='change-device' data-target='mobile'>
						<img src='img/mobile.png' alt='Smartphone' />
					</a>
				</li>
			</ul>
			<a class="btn btn-download" target="_blank" href="http://www.prestashop.com/en/download">Download<br>PrestaShop</a>
			<a class="btn btn-explore btn-explore-bo" data-view="back" href="http://demo-bo.prestashop.com/demo/index.php?controller=AdminLogin&email=demo@prestashop.com&password=prestashop_demo">Explore<br>Back Office</a>
			<a class="btn btn-explore btn-explore-front hide" data-view="front" href="http://demo-store.prestashop.com/">Explore<br>Front Office</a>
			<a class="btn btn-collapse" href="#">Close</a>
		</div>
		<div id="iframe-container" class="desktop">
			<div id="iframe-wrapper">
				<div id="loadingMessage"><img src="img/loading.gif" alt=""></div>
				<iframe id="framelive" name="framelive" src=""></iframe>
			</div>
		</div>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script>
			$(function(){

				function removeLoading(){
					$('.loading').removeClass('loading');
				}
				function getUrlVars(){
					var vars = [], hash;
					var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
					for(var i = 0; i < hashes.length; i++)
					{
						hash = hashes[i].split('=');
						vars.push(hash[0]);
						vars[hash[0]] = hash[1];
					}
					return vars;
				}
				var params = getUrlVars();
				var init = $('.btn-explore-front');
				if (typeof params.view !== undefined){
					switch (params.view) {
						case 'front':
							var init = $('.btn-explore-front');
							break;
						case 'back':
							var init = $('.btn-explore-back');
							break;
						default:
							var init = $('.btn-explore-front');
							break;
					}
				}
				$("#framelive").attr("src", init.attr('href'));
				history.pushState({}, '', '/?view=' + init.data("view"));

				$('#framelive').load(function () {
					$('#loadingMessage').css('display', 'none');
				});
				$('#header a.btn-explore').on('click', function(e){
					e.preventDefault();
					var explore = $(this).attr('href');
					$("#framelive").attr("src", explore);
					$('#header a.btn-explore').siblings('a.btn-explore').toggleClass('hide');
					history.pushState({}, '', '/?view=' + $(this).data("view"));
					return false;
				});
				$('#devices').on('click','.change-device',function(){
					var device = $(this).data('target');
					$('.change-device').removeClass('active');
					$(this).addClass('active');
					$('#iframe-container').removeClass().addClass(device).find('iframe'); //.addClass('loading');
					var $loadingElement = $('#iframe-wrapper');
					//window.setTimeout(removeLoading, 500);
					$('body').removeClass().addClass('framed-' + device);
				})
			})
		</script>
	</body>
</html>
